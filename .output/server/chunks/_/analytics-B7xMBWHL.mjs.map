{"version":3,"file":"analytics-B7xMBWHL.mjs","sources":["../../../../../src/lib/server/fn/analytics.ts?tsr-directive-use-server="],"sourcesContent":null,"names":["getAnalytics_createServerFn_handler","createServerRpc","opts","signal","getAnalytics.__executeServer","__executeServer","getAnalytics","createServerFn","method","middleware","authMiddleware","handler","context","user","supabase","getSupabaseServerClient","data","error","from","select","eq","id","order","ascending","Error","JSON","stringify","daysSinceJoined","differenceInCalendarDays","Date","created_at","monthsSinceJoined","differenceInMonths","groupLogsByDate","length","groupedByDate","forEach","log","day","toLocaleDateString","dateJoined","dataWithFilledDays","date","logs","i","undefined","veryLastLog","sort","a","b","getDate","changes","current","amount","name","totalMoney","prev","push","setDate","summary","totalAdditions","totalDeductions","groupLogsByMonth","groupedByMonth","logsByDate","getMonth","getYear","groupedByMonthArray","key","_","sum","map","groupsLogsByMoney","groupedByMoney","moneyId","Object","entries","getTime","Math","abs","currentData","fill","color"],"mappings":"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"}